<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Qu·∫£n l√Ω ƒë∆°n h√†ng (Admin)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
  <style>
    /* CSS cho b·∫£ng ƒë∆°n h√†ng */
    .order-table { width: 100%; border-collapse: collapse; margin-top: 20px; background: white; border-radius: 12px; overflow: hidden; box-shadow: var(--shadow); }
    .order-table th, .order-table td { padding: 15px; text-align: left; border-bottom: 1px solid #eee; }
    .order-table th { background: var(--primary-color); color: white; font-weight: 600; }
    .order-table tr:hover { background: #f9f9f9; }

    /* CSS cho m√†n h√¨nh ƒêƒÉng nh·∫≠p (M·ªöI) */
    #login-screen {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: #f4f7f6;
        display: flex; justify-content: center; align-items: center;
        z-index: 9999;
    }
    .login-box {
        background: white; padding: 40px; border-radius: 16px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1); text-align: center;
        max-width: 400px; width: 90%;
    }
    .login-box h2 { margin-bottom: 20px; color: #333; }
    .login-box input {
        width: 100%; padding: 12px; margin-bottom: 15px;
        border: 1px solid #ddd; border-radius: 8px;
        font-size: 1.2rem; text-align: center; letter-spacing: 5px;
    }
    .btn-login {
        width: 100%; padding: 12px; background: var(--primary-color);
        color: white; border: none; border-radius: 8px;
        font-size: 1rem; font-weight: bold; cursor: pointer;
    }
    .btn-login:hover { background: var(--primary-dark); }
    
    /* M·∫∑c ƒë·ªãnh ·∫©n n·ªôi dung qu·∫£n l√Ω */
    #admin-content { display: none; }
  </style>
</head>
<body>

  <div id="login-screen">
      <div class="login-box">
          <h2>üîí Admin Access</h2>
          <p style="margin-bottom: 20px; color: #666;">Vui l√≤ng nh·∫≠p m√£ PIN ƒë·ªÉ xem ƒë∆°n h√†ng</p>
          <form onsubmit="checkPin(event)">
              <input type="password" id="pin-input" placeholder="******" maxlength="6" required autofocus>
              <button type="submit" class="btn-login">M·ªü Kh√≥a</button>
          </form>
          <p id="error-msg" style="color: red; margin-top: 10px; display: none;">M√£ PIN sai! Vui l√≤ng th·ª≠ l·∫°i.</p>
      </div>
  </div>

  <div id="admin-content">
      <header>
        <nav>
          <a class="brand" href="index.html">Shop Online</a>
          <div>
            <a href="index.html">Trang ch·ªß</a>
            <a href="catalog.html">S·∫£n ph·∫©m</a>
            <a href="manage.html" class="active">Qu·∫£n l√Ω</a>
          </div>
        </nav>
      </header>

      <main>
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <h2>Danh s√°ch ƒë∆°n h√†ng</h2>
            <button onclick="logout()" style="padding:8px 15px; background:#ff4d4d; color:white; border:none; border-radius:6px; cursor:pointer;">ƒêƒÉng xu·∫•t</button>
        </div>

        <div style="overflow-x: auto;">
            <table class="order-table" id="orders-table">
            <thead>
               
  <tr>
    <th>Th·ªùi gian</th>
    <th>H·ªç t√™n</th>
    <th>SƒêT / ƒê·ªãa ch·ªâ</th>
    <th>S·∫£n ph·∫©m mua</th>
    <th>H√†nh ƒë·ªông</th> </tr>
</thead>
            <tbody>
                </tbody>
            </table>
        </div>
        <p id="no-orders" style="display:none; text-align:center; margin-top:20px; color:#888;">Ch∆∞a c√≥ ƒë∆°n h√†ng n√†o.</p>
      </main>

      <footer>
        <p class="footer-copyright">&copy; Shop Online</p>
      </footer>
  </div>

  <script src="js/manage.js"></script>

  <script>
      const ADMIN_PIN = "123456"; // <--- Anh Thi·ªán ƒê·ªïi M√£ Pin ·ªû ƒê√¢y


      function checkPin(e) {
          e.preventDefault(); // blocklist
          const input = document.getElementById('pin-input').value;
          const errorMsg = document.getElementById('error-msg');

          if (input === ADMIN_PIN) {
              // if correct PIN
              document.getElementById('login-screen').style.display = 'none'; // Hide login screen
              document.getElementById('admin-content').style.display = 'block'; // Show admin content
              sessionStorage.setItem('is_admin_logged_in', 'true'); // Save temporary login state
          } else {
              // if incorrect PIN
              errorMsg.style.display = 'block';
              document.getElementById('pin-input').value = ''; // Clear input field
              document.getElementById('pin-input').focus();
          }
      }

      // logout function
      function logout() {
          sessionStorage.removeItem('is_admin_logged_in');
          location.reload(); // Reload page to lock again
      }

      // Automatically check if already logged in before (to avoid re-entering PIN on F5)
      window.onload = function() {
          if (sessionStorage.getItem('is_admin_logged_in') === 'true') {
              document.getElementById('login-screen').style.display = 'none';
              document.getElementById('admin-content').style.display = 'block';
          }
          // Call renderOrders function from manage.js
          if(typeof renderOrders === 'function') {
              renderOrders();
          }
      }
  </script>
</body>
</html>